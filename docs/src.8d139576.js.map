{"version":3,"sources":["config.json","src/fetchData.js","src/dateHelper.js","src/index.js"],"names":["module","exports","env","CONTENTFUL_SPACE_ID","CONTENTFUL_ACCESS_TOKEN","fetchData","callback","loading","API_BASE_URL","API_SPACE_ID","contentfulApiConfig","API_TOKEN","xhr","XMLHttpRequest","open","onreadystatechange","readyState","status","response","JSON","parse","responseText","console","log","onloadstart","_","requestAnimationFrame","removeAttribute","onerror","e","onloadend","setAttribute","send","targetDate","clock","document","getElementById","daysSpan","querySelector","hoursSpan","minutesSpan","secondsSpan","endtime","updateClock","t","getTimeRemaining","Date","seconds","Math","floor","minutes","hours","days","innerHTML","total","clearInterval","timeinterval","setInterval","titleBanner","images","getElementsByClassName","dateElement","timeLeft","presentation","menu","extra","months","loadImages","assets","count","asset","url","fields","file","src","animateit","mainContent","sections","addEventListener","curPos","scrollTop","width","max","documentElement","clientWidth","window","innerWidth","clientHeight","innerHeight","body","offsetHeight","classList","contains","replace","section","offsetTop","outerHeight","add","items","includes","idImgPresentation","imagesLandingPage","map","id","sys","Asset","filter","parentElement","style","backgroundImage","textContent","blogText","prepend","generalBlogText","dateStr","dateOfWedding","date","getDate","getMonth","goToSection","event","preventDefault","scrollIntoView"],"mappings":"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","file":"src.8d139576.js","sourceRoot":"..","sourcesContent":["module.exports={env:{CONTENTFUL_SPACE_ID:\"glv5vvf55jiq\",CONTENTFUL_ACCESS_TOKEN:\"l8M3azNCTjms7SXHHdli8KkIgOOddch8yXDoIHShnpE\"}};","import contentfulApiConfig from \"../config.json\";\n\nconst fetchData = (callback, loading) => {\n  const API_BASE_URL = \"https://cdn.contentful.com\";\n  const API_SPACE_ID = contentfulApiConfig.env.CONTENTFUL_SPACE_ID;\n  const API_TOKEN = contentfulApiConfig.env.CONTENTFUL_ACCESS_TOKEN;\n  var xhr = new XMLHttpRequest();\n  xhr.open(\n    \"GET\",\n    `${API_BASE_URL}/spaces/${API_SPACE_ID}/entries?access_token=${API_TOKEN}`\n  );\n  xhr.onreadystatechange = () => {\n    /*\n        if (xhr.readyState === 3) {\n          requestAnimationFrame(_ => loading.removeAttribute(\"hidden\"));\n        }\n        */\n    if (xhr.readyState === 4 && xhr.status === 200) {\n      let response = JSON.parse(xhr.responseText);\n      console.log(response);\n      callback(response);\n      //requestAnimationFrame(_ => loading.setAttribute(\"hidden\", \"true\"));\n    }\n  };\n  if (loading) {\n    xhr.onloadstart = _ =>\n      requestAnimationFrame(_ => loading.removeAttribute(\"hidden\"));\n    xhr.onerror = e => console.log(e);\n    xhr.onloadend = _ =>\n      requestAnimationFrame(_ => loading.setAttribute(\"hidden\", \"true\"));\n  }\n  xhr.send();\n  /*\n    var client = contentful.createClient({\n      space: \"glv5vvf55jiq\",\n      accessToken: \"l8M3azNCTjms7SXHHdli8KkIgOOddch8yXDoIHShnpE\"\n    });\n    client.getEntry(\"958ve596xfbAQfzzOfjCD\").then(function(entry) {\n      // logs the entry metadata\n      console.log(entry.sys);\n  \n      // logs the field with ID title\n      console.log(entry.fields);\n      banner.src = entry.fields.photos.fields.file.url;\n    });\n    */\n};\n\nexport default fetchData;\n","/*\n * using the solution on the article:\n * https://www.sitepoint.com/build-javascript-countdown-timer-no-dependencies/\n */\nexport default targetDate => {\n    //var updateClock;\n    var clock = document.getElementById('clock-deadline');\n    var daysSpan = clock.querySelector('.days');\n    var hoursSpan = clock.querySelector('.hours');\n    var minutesSpan = clock.querySelector('.minutes');\n    var secondsSpan = clock.querySelector('.seconds');\n    var endtime = 'January 25 2020 09:00:00 GMT-0300';\n    \n    /* for a endpoint to provide the endtime. \n    fetch('https://worldtimeapi.org/api/timezone/America/Fortaleza')\n        .then(data => data.json())\n        .then(json => { \n            updateClock = function (endtime) {\n                return _ => {\n                    var t = getTimeRemaining(endtime);\n                    daysSpan.innerHTML = t.days;\n                    hoursSpan.innerHTML = t.hours;\n                    minutesSpan.innerHTML = t.minutes;\n                    secondsSpan.innerHTML = t.seconds;\n                    \n                    if(t.total<=0){\n                        clearInterval(timeinterval);\n                    }\n                }\n            }(json.datetime);\n              \n            updateClock(); // run function once at first to avoid delay\n            var timeinterval = setInterval(updateClock,1000);\n        })\n        .catch(error => console.error(error));\n    */\n\n    function getTimeRemaining(endtime) {\n        var t = Date.parse(endtime) - Date.parse(new Date());\n        var seconds = Math.floor( (t/1000) % 60 );\n        var minutes = Math.floor( (t/1000/60) % 60 );\n        var hours = Math.floor( (t/(1000*60*60)) % 24 );\n        var days = Math.floor( t/(1000*60*60*24) );\n        return {\n            'total': t,\n            'days': days,\n            'hours': hours,\n            'minutes': minutes,\n            'seconds': seconds\n        };\n    }\n    function updateClock(){\n        var t = getTimeRemaining(endtime);\n        daysSpan.innerHTML = t.days;\n        hoursSpan.innerHTML = t.hours;\n        minutesSpan.innerHTML = t.minutes;\n        secondsSpan.innerHTML = t.seconds;\n\n        if(t.total<=0){\n          clearInterval(timeinterval);\n        }\n      }\n      \n      updateClock(); // run function once at first to avoid delay\n      var timeinterval = setInterval(updateClock,1000);\n};","// main.js\nimport fetchData from \"./fetchData\";\nimport dateHelper from \"./dateHelper\";\n\nimport \"./styles.css\";\n\nconst titleBanner = document.getElementById(\"title-banner\");\nconst loading = document.querySelector(\".loading[hidden]\");\nconst images = document.getElementsByClassName(\"pictures\");\nconst dateElement = document.querySelector(\".wedding-date\");\nconst timeLeft = document.querySelector('.time-left');\nconst presentation = document.querySelector(\n  \".section-presentation .presentation\"\n);\nconst menu = document.querySelector('.navbar');\nconst extra = document.querySelector(\".info-extra .infos\");\nconst months = [\n  \"Janeiro\",\n  \"Feveiro\",\n  \"Março\",\n  \"Abril\",\n  \"Maio\",\n  \"Junho\",\n  \"Julho\",\n  \"Agosto\",\n  \"Setembro\",\n  \"Outubro\",\n  \"Novembro\",\n  \"Dezembro\"\n];\nconst loadImages = assets => {\n  var count = 0;\n  for (let asset of assets) {\n    let url = asset.fields.file.url;\n    images[count++].src = url;\n  }\n};\nconst animateit = _ => {\n  const mainContent = document.getElementById(\"main-container\");\n  const sections = document.getElementsByClassName(\"section\");\n  const animatePage = _ => {\n    const curPos = mainContent.scrollTop;\n    const width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    const height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    if (width > 700) {\n      if (curPos > document.body.offsetHeight - 30 /* menu height */ && menu.classList.contains('top-nav')) {\n        menu.classList.replace('top-nav', 'sidebar-nav');\n      } else if (curPos < document.body.offsetHeight - 30 && menu.classList.contains('sidebar-nav')) {\n        menu.classList.replace('sidebar-nav', 'top-nav');\n      }\n    }\n    for (let section of sections) {\n      if (section.offsetTop - window.outerHeight / 2 <= curPos) {\n        section.classList.add(\"animate\");\n      }\n    }\n  };\n  mainContent.addEventListener(\"scroll\", animatePage);\n};\n\nif (document.readyState === 'loading') {\n  document.addEventListener(\"DOMContentLoaded\", animateit);\n} else {\n  animateit();\n}\ndateHelper();\n\nfetchData(({ items, includes }) => {\n  const idImgPresentation = items[0].fields.imagesLandingPage.map(\n    id => id.sys.id\n  );\n  loadImages(\n    includes.Asset.filter(asset => idImgPresentation.includes(asset.sys.id))\n  );\n  titleBanner.parentElement.style.backgroundImage = `url('${includes.Asset[1].fields.file.url}')`;\n  titleBanner.textContent = items[0].fields.blogText;\n  presentation.prepend(items[0].fields.generalBlogText);\n  extra.textContent = items[0].fields.generalBlogText;\n  var dateStr = items[0].fields.dateOfWedding;\n  var date = new Date(dateStr);\n  dateElement.setAttribute(\"datetime\", dateStr);\n  dateElement.textContent = date.getDate() + \" de \" + months[date.getMonth()];\n}, loading);\n\nwindow.goToSection = id => {\n  window.event.preventDefault();\n  document.getElementById(id).scrollIntoView();\n};\n\n//document.documentElement.style.setProperty('--page-bg-color', this.checked ? 'black' : 'whitesmoke');\n"]}